<MMS NAME="Real Time Test">

	<GLOBAL_PARAMETERS CLOCK_MODE="CLOCK_CPU" PROCESS_MODE="REAL_TIME" JACK="TRUE"/>
	
  <!-- ********** ENVIRONMENT AGENT ********** -->

	<ENVIRONMENT_AGENT_CLASS NAME="ENVIRONMENT" CLASS="mms.EnvironmentAgent">
		<WORLD CLASS_WORLD="mms.world.World">
			<LAW CLASS="mms.movement.MovementLaw" />
			<ARG NAME="dimensions" VALUE="3" />
			<ARG NAME="structure" VALUE="continuous" />
			<ARG NAME="form" VALUE="cube:200:loop" />
			<ARG NAME="friction_coefficient" VALUE="0.25" />
		</WORLD>
		<LAW CLASS="mms.world.law.MovementLaw">
			<ARG NAME="friction_coefficient" VALUE="0.25" />
			<ARG NAME="gravity" VALUE="10" />
		</LAW>
		<EVENT_SERVER CLASS="mms.audio.AudioEventServer" COMM="mms.comm.direct.CommDirect" PERIOD="250 150 200 1000">
			<!-- Qualquer agente e componente pode receber argumentos, no formato abaixo, e são totalmente de responsabilidad do código do usuário -->
			<ARG NAME="SPEED_SOUND" VALUE="343.3" />
			<ARG NAME="REFERENCE_DISTANCE" VALUE="1.0" />
			<ARG NAME="ROLLOF_FACTOR" VALUE="1.0" />
		</EVENT_SERVER>
		<EVENT_SERVER CLASS="mms.movement.MovementEventServer" COMM="mms.comm.direct.CommDirect" PERIOD="100 0">
		</EVENT_SERVER>
	</ENVIRONMENT_AGENT_CLASS>
	
  <!-- ********** MUSICAL AGENT CLASSES ********** -->

	<MUSICAL_AGENT_CLASS NAME="MUSICIAN" CLASS="mms.MusicalAgent">
		<KB>
			<FACT NAME="role" VALUE="master" PUBLIC="false" />
			<FACT NAME="wavetable" VALUE="cowbell_menor.wav" PUBLIC="false" />
			<FACT NAME="bpm" VALUE="120" PUBLIC="false" />
			<FACT NAME="pattern" VALUE="111011010110" PUBLIC="false" />
			<!-- <FACT NAME="pattern" VALUE="1110" PUBLIC="false" /> -->
			<FACT NAME="inital_phase" VALUE="1" />
			<FACT NAME="phase" VALUE="1" />
			<FACT NAME="slide" VALUE="1" />
		</KB>
		<COMPONENTS>
			<REASONING NAME="Reasoning" CLASS="mms.apps.cp.CP_Reasoning" REASONING_MODE="PERIODIC" PERIOD="20" />
			<ACTUATOR NAME="Mouth" CLASS="mms.Actuator" EVENT_TYPE="AUDIO" MEMORY="mms.kb.AudioMemory" COMM="mms.comm.direct.CommDirect" />
			<SENSOR NAME="Ear" CLASS="mms.Sensor" EVENT_TYPE="AUDIO" MEMORY="mms.kb.AudioMemory" COMM="mms.comm.direct.CommDirect" />
			<REASONING NAME="MovementReasoning" CLASS="mms.movement.MovementReasoning" REASONING_MODE="PERIODIC" PERIOD="50"  />
			<ACTUATOR NAME="Legs" CLASS="mms.Actuator" EVENT_TYPE="MOVEMENT" COMM="mms.comm.direct.CommDirect" />
			<SENSOR NAME="Eyes" CLASS="mms.Sensor" EVENT_TYPE="MOVEMENT" COMM="mms.comm.direct.CommDirect" />
		</COMPONENTS>
	</MUSICAL_AGENT_CLASS>

	<MUSICAL_AGENT_CLASS NAME="LISTENER" CLASS="mms.MusicalAgent">
		<COMPONENTS>
			<REASONING NAME="AudioReasoning" CLASS="mms.audio.jack.JACKOutputReasoning" />
			<SENSOR NAME="Ear" CLASS="mms.Sensor" EVENT_TYPE="AUDIO" MEMORY="mms.kb.AudioMemory" COMM="mms.comm.direct.CommDirect" POSITION="(0;0;0)"/>
			<ACTUATOR NAME="Legs" CLASS="mms.Actuator" EVENT_TYPE="MOVEMENT" COMM="mms.comm.direct.CommDirect" />
			<SENSOR NAME="Eyes" CLASS="mms.Sensor" EVENT_TYPE="MOVEMENT" COMM="mms.comm.direct.CommDirect" />
		</COMPONENTS>
	</MUSICAL_AGENT_CLASS>
  
  <!-- ********** MUSICAL AGENT INSTANCES ********** -->

	<MUSICAL_AGENT NAME="Leader" CLASS="MUSICIAN">
		<FACT NAME="role" VALUE="master" />
		<FACT NAME="wavetable" VALUE="media/woodblock_low.wav" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(0;0;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>

	<MUSICAL_AGENT NAME="Follower_1" CLASS="MUSICIAN">
		<FACT NAME="role" VALUE="slave" />
		<FACT NAME="wavetable" VALUE="media/cowbell.wav" />
		<FACT NAME="phase" VALUE="1" />
		<FACT NAME="slide" VALUE="1" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(10;0;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>

	<MUSICAL_AGENT NAME="Follower_2" CLASS="MUSICIAN">
		<FACT NAME="role" VALUE="slave" />
		<FACT NAME="wavetable" VALUE="media/woodblock_high.wav" />
		<FACT NAME="phase" VALUE="1" />
		<FACT NAME="slide" VALUE="2" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(20;0;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>
	
	<!-- 
	<MUSICAL_AGENT NAME="Follower_3" CLASS="MUSICIAN">
		<FACT NAME="role" VALUE="slave" />
		<FACT NAME="wavetable" VALUE="media/cowbell.wav" />
		<FACT NAME="phase" VALUE="2" />
		<FACT NAME="slide" VALUE="2" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(5;5;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>

	<MUSICAL_AGENT NAME="Follower_4" CLASS="MUSICIAN">
		<FACT NAME="role" VALUE="slave" />
		<FACT NAME="wavetable" VALUE="media/cowbell.wav" />
		<FACT NAME="phase" VALUE="2" />
		<FACT NAME="slide" VALUE="2" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(5;5;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>
	 -->
	<MUSICAL_AGENT NAME="Listener" CLASS="LISTENER">
		<ARG_COMP COMP="AudioReasoning" NAME="mapping" VALUE="Ear;system:playback_1" />
		<ARG_COMP COMP="Legs" NAME="pos" VALUE="(-2;-2;0)" />
		<ARG_COMP COMP="Legs" NAME="vel" VALUE="(0;0;0)" />
	</MUSICAL_AGENT>

</MMS>